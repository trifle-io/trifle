# Example configuration using external databases
# Use this when you want to connect to existing database instances
# instead of running them in the Kubernetes cluster

replicaCount: 2

# Disable internal database
postgresql:
  enabled: false

# Configure external database connection
externalPostgresql:
  host: "postgres.example.com"
  port: 5432
  username: "trifle"
  password: "secure-postgres-password"
  database: "trifle_prod"
  # Alternative: use existing secret
  # existingSecret: "postgres-credentials"
  # existingSecretPasswordKey: "password"

# Application configuration
app:
  secretKeyBase: "your-64-character-secret-key-base-here"
  host: "trifle.yourdomain.com"
  deploymentMode: "self_hosted"
  mailer:
    adapter: "smtp"
    from:
      name: "Trifle"
      email: "no-reply@yourdomain.com"
    smtp:
      relay: "smtp.yourdomain.com"
      username: "smtp-user"
      password: "smtp-password"
      port: 587
      auth: "if_available"
      tls: "if_available"
      ssl: false

# Feature toggles
features:
  projects:
    enabled: false

# MongoDB sidecar configuration
mongo:
  image:
    repository: mongo
    tag: "7.0"
    pullPolicy: IfNotPresent
  resources: {}
  persistence:
    enabled: false
    storageClass: ""
    size: 10Gi
    accessModes:
      - ReadWriteOnce

# Initial user creation (runs during installation)
initialUser:
  enabled: true
  email: "admin@yourdomain.com"  # Set your admin email
  password: "password"           # Set a secure password
  admin: true

# Ingress configuration
ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: trifle.yourdomain.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: trifle-tls
      hosts:
        - trifle.yourdomain.com
